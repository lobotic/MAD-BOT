<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Calculadora de Puntuaciones</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background-color: #f8f8f8;
    }
    header {
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      align-items: center;
      text-align: center;
      margin: 10px;
    }
    header img {
      width: 206px;
      justify-self: center;
    }
    .timers {
      font-size: 1.5em;
    }
    section {
      margin-top: 20px;
      background: #fff;
      padding: 10px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    h2 { margin-top: 0; }
    .row { margin: 5px 0; }
    button { margin: 2px; padding: 5px 10px; }
  </style>
</head>
<body>
  <header>
    <div class="timers">
      Preparación: <span id="prepTimer">60</span>s
      <button onclick="startPrep()">▶</button>
      <button onclick="resetPrep()">⟳</button>
    </div>
    <img src="logo.png" alt="Logo">
    <div class="timers">
      Partida: <span id="mainTimer">120</span>s
      <button onclick="startMain()">▶</button>
      <button onclick="resetMain()">⟳</button>
    </div>
  </header>

  <!-- EQUIPO 1 -->
  <section>
    <h2>Equipo 1</h2>
    <div class="row">Nombre: <input id="team1_name" type="text"></div>
    <div class="row">Categoría: 
      <select id="team1_cat">
        <option value="">--Seleccionar--</option>
        <option>Junior</option>
        <option>Senior</option>
      </select>
    </div>
    <div class="row">Ronda: <input id="team1_round" type="number" value="1" min="1"></div>
    <div class="row">Azules: <input id="blue1" type="number" value="0" min="0"></div>
    <div class="row">Amarillos: <input id="yellow1" type="number" value="0" min="0"></div>
    <div class="row">Verdes: <input id="green1" type="number" value="0" min="0"></div>
    <div class="row">Mal clasificados: <input id="misSorted1" type="number" value="0" min="0"></div>
    <div class="row">Árboles colocados:
      <select id="trees1">
        <option value="0">0</option>
        <option value="1">1</option>
        <option value="2">2</option>
      </select>
    </div>
    <div class="row">Diana A:
      <select id="diana1a">
        <option value="0">Fallida</option>
        <option value="1">Conseguida</option>
      </select>
    </div>
    <div class="row">Diana B:
      <select id="diana1b">
        <option value="0">Fallida</option>
        <option value="1">Conseguida</option>
      </select>
    </div>
    <div class="row"><input id="finish1" type="checkbox"> Robot regresa a base</div>
    <div class="row"><input id="allDrive1" type="checkbox"> Todos los robots se mueven</div>
    <div class="row"><input id="prepPenalty1" type="checkbox"> Penalización por preparación</div>
    <div class="row"><input id="fallenTrees1" type="checkbox"> Árboles caídos</div>

    <div class="row">Total: <span id="total1">0</span></div>
    <div class="row">Penalizadores: <span id="penaltyPoints1">0</span></div>

    <button onclick="calculateScore(1)">Calcular</button>
    <button onclick="resetTeam(1)">Reset Equipo</button>
  </section>

  <!-- EQUIPO 2 -->
  <section>
    <h2>Equipo 2</h2>
    <div class="row">Nombre: <input id="team2_name" type="text"></div>
    <div class="row">Categoría: 
      <select id="team2_cat">
        <option value="">--Seleccionar--</option>
        <option>Junior</option>
        <option>Senior</option>
      </select>
    </div>
    <div class="row">Ronda: <input id="team2_round" type="number" value="1" min="1"></div>
    <div class="row">Azules: <input id="blue2" type="number" value="0" min="0"></div>
    <div class="row">Amarillos: <input id="yellow2" type="number" value="0" min="0"></div>
    <div class="row">Verdes: <input id="green2" type="number" value="0" min="0"></div>
    <div class="row">Mal clasificados: <input id="misSorted2" type="number" value="0" min="0"></div>
    <div class="row">Árboles colocados:
      <select id="trees2">
        <option value="0">0</option>
        <option value="1">1</option>
        <option value="2">2</option>
      </select>
    </div>
    <div class="row">Diana A:
      <select id="diana2a">
        <option value="0">Fallida</option>
        <option value="1">Conseguida</option>
      </select>
    </div>
    <div class="row">Diana B:
      <select id="diana2b">
        <option value="0">Fallida</option>
        <option value="1">Conseguida</option>
      </select>
    </div>
    <div class="row"><input id="finish2" type="checkbox"> Robot regresa a base</div>
    <div class="row"><input id="allDrive2" type="checkbox"> Todos los robots se mueven</div>
    <div class="row"><input id="prepPenalty2" type="checkbox"> Penalización por preparación</div>
    <div class="row"><input id="fallenTrees2" type="checkbox"> Árboles caídos</div>

    <div class="row">Total: <span id="total2">0</span></div>
    <div class="row">Penalizadores: <span id="penaltyPoints2">0</span></div>

    <button onclick="calculateScore(2)">Calcular</button>
    <button onclick="resetTeam(2)">Reset Equipo</button>
  </section>

  <script>
    let prepTimer = 60;
    let mainTimer = 120;
    let intervalPrep = null;
    let intervalMain = null;

    function startPrep(){
      if(intervalPrep) return;
      intervalPrep = setInterval(()=>{
        if(prepTimer > 0){
          prepTimer--;
          document.getElementById("prepTimer").textContent = prepTimer;
        }
      },1000);
    }

    function resetPrep(){
      clearInterval(intervalPrep);
      intervalPrep = null;
      prepTimer = 60;
      document.getElementById("prepTimer").textContent = prepTimer;
    }

    function startMain(){
      if(intervalMain) return;
      intervalMain = setInterval(()=>{
        if(mainTimer > 0){
          mainTimer--;
          document.getElementById("mainTimer").textContent = mainTimer;
        }
      },1000);
    }

    function resetMain(){
      clearInterval(intervalMain);
      intervalMain = null;
      mainTimer = 120;
      document.getElementById("mainTimer").textContent = mainTimer;
    }

    function calculateScore(team){
      let score = 0;
      let penalty = 0;

      // Sumar puntos por clasificación
      score += parseInt(document.getElementById("blue"+team).value)*5;
      score += parseInt(document.getElementById("yellow"+team).value)*10;
      score += parseInt(document.getElementById("green"+team).value)*15;

      // Restar puntos por errores
      let misSortedPoints = parseInt(document.getElementById("misSorted"+team).value)*5;
      penalty += misSortedPoints;
      score -= misSortedPoints;

      // Puntos por árboles
      score += parseInt(document.getElementById("trees"+team).value)*10;

      // Puntos por dianas
      score += parseInt(document.getElementById("diana"+team+"a").value)*20;
      score += parseInt(document.getElementById("diana"+team+"b").value)*20;

      // Puntos extra
      if(document.getElementById("finish"+team).checked) score += 10;
      if(document.getElementById("allDrive"+team).checked) score += 15;

      // Penalizaciones
      if(document.getElementById("prepPenalty"+team).checked){
        score -= 10;
        penalty += 10;
      }
      if(document.getElementById("fallenTrees"+team).checked){
        score -= 5;
        penalty += 5;
      }

      document.getElementById("total"+team).textContent = score;
      document.getElementById("penaltyPoints"+team).textContent = penalty;
    }

    function resetTeam(team){
      document.getElementById("team"+team+"_name").value="";
      document.getElementById("team"+team+"_cat").selectedIndex=0;
      document.getElementById("team"+team+"_round").value=1;
      ["blue","yellow","green","misSorted"].forEach(id=>{
        document.getElementById(id+team).value=0;
      });
      ["trees"+team,"diana"+team+"a","diana"+team+"b"].forEach(id=>{
        document.getElementById(id).selectedIndex=0;
      });
      ["finish","allDrive","prepPenalty","fallenTrees"].forEach(id=>{
        document.getElementById(id+team).checked=false;
      });
      document.getElementById("total"+team).textContent=0;
      document.getElementById("penaltyPoints"+team).textContent=0;
    }
  </script>
</body>
</html>
